<UserControl
    x:Class="Arqanum.Controls.UserProfileDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="Transparent"
    IsHitTestVisible="True">

    <Grid x:Name="RootGrid"
          Background="Transparent"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">

        <Rectangle x:Name="Overlay"
                   Fill="{ThemeResource SystemControlForegroundBaseHighBrush}"
                   Opacity="0.3"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch"
                   PointerPressed="Overlay_PointerPressed"/>

        <Border x:Name="DialogContainer"
                Width="400"
                Height="480"
                Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                CornerRadius="12"
                Padding="20"
                RenderTransformOrigin="0.5,0.5"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <Border.RenderTransform>
                <ScaleTransform x:Name="DialogScale" ScaleX="0.8" ScaleY="0.8"/>
            </Border.RenderTransform>

            <Grid>
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" MaxHeight="440" Margin="0,25,0,0">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Spacing="12" >

                        <Ellipse Width="100" Height="100" >
                            <Ellipse.Fill>
                                <ImageBrush ImageSource="{Binding AvatarUrl}" Stretch="UniformToFill"/>
                            </Ellipse.Fill>
                        </Ellipse>

                        <TextBlock Text="{Binding FullName}"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"
                                   TextAlignment="Center"/>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="6">
                            <TextBlock Text="{Binding Username}"
                                       FontSize="14"
                                       Foreground="{ThemeResource SystemAccentColor}"
                                       VerticalAlignment="Center"/>
                            <Button FontFamily="Segoe MDL2 Assets"
                                    Content="&#xE8C8;" 
                                    FontSize="14"
                                    Padding="4"
                                    Click="CopyUsername_Click"
                                    ToolTipService.ToolTip="Copy username"/>
                        </StackPanel>

                        <Grid Width="320" HorizontalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                       Text="{Binding UserId}"
                                       FontSize="12"
                                       Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"
                                       VerticalAlignment="Center"
                                       ToolTipService.ToolTip="{Binding UserId}"/>

                            <Button Grid.Column="1"
                                    FontFamily="Segoe MDL2 Assets"
                                    Content="&#xE8C8;"  
                                    FontSize="14"
                                    Padding="4"
                                    Click="CopyUserId_Click"
                                    Margin="6,0,0,0"
                                    ToolTipService.ToolTip="Copy user ID"/>
                        </Grid>



                        <TextBox Text="{Binding Bio, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            AcceptsReturn="True"
                            TextWrapping="Wrap"
                            PlaceholderText="Bio"
                            FontSize="13"
                            Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"
                            BorderThickness="1"
                            Height="100"
                            Width="320" />

                        <TextBlock Text="No more than 150 characters"
                            FontSize="12"
                            Foreground="{ThemeResource SystemControlForegroundBaseMediumHighBrush}"
                            Margin="0,4,0,12" />

                        <Button Content="Update"
                            Width="100"
                            HorizontalAlignment="Right"
                            Background="{ThemeResource SystemAccentColor}"
                            Foreground="White"
                            Click="Update_Click" />

                    </StackPanel>
                </ScrollViewer>

                <Button Width="38" Height="36"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Background="Transparent"
                        BorderThickness="0"
                        Margin="10"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="16"
                        Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"
                        Content="&#xE711;" 
                        VerticalContentAlignment="Center"
                        HorizontalContentAlignment="Center"
                        Click="Close_Click"
                        ToolTipService.ToolTip="Close"/>

            </Grid>
        </Border>
    </Grid>
</UserControl>
